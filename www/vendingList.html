<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
    <link rel="stylesheet" href="components/loader.css">
    <link rel="stylesheet" href="css/wave.css">
    <link rel="stylesheet" href="css/vending.css">

    <script src="components/loader.js"></script>
    <script>
        // APIキーの設定とSDK初期化
        var ncmb = new NCMB("a59165a217e09aae15a26c95a9e51f8510ea7fbb8da9ad8c15686fa1c5b449e7", "32551b9f4f6afa631f1fc4b63df334ab33683be35b820813931f0e6c156aa4c3");

        // function multi_filter(h, t, s, r = "") {
        //     console.log("チョキ");
        //     let hidden = h;
        //     let targets = document.querySelectorAll(t);
        //     let selects = document.querySelectorAll(s);
        //     let result = document.querySelector(r);
        //     let result_msg = "";

        //     if (selects) {
        //         //****** for all select ******
        //         for (let i of selects) {
        //             i.addEventListener("change", () => {
        //                 let hidden_num = 0;
        //                 //*** for each target ***
        //                 for (let ii of targets) {
        //                     //*** delete hidden class ***
        //                     ii.classList.remove(hidden);
        //                     //*** check target every select ***
        //                     for (let iii of selects) {
        //                         //*** get select name value / option value / target data attribute ***
        //                         let value = iii.value;
        //                         let name = iii.getAttribute("name");
        //                         let item_data = ii.getAttribute("data-" + name);
        //                         //*** set hidden class ***
        //                         // exist value & except all & item_data not match & no hidden class
        //                         if (value && value !== "all" && value !== item_data && !ii.classList.contains(hidden)) {
        //                             ii.classList.add(hidden);
        //                             hidden_num++;
        //                         }
        //                     }
        //                 }
        //             });
        //         }
        //     }
        // }

        function waa(num) {
            console.log("右膝十字靱帯断裂");
            var TestClass = ncmb.DataStore('vending');
            var item = TestClass.equalTo("vendingId", num)
                .fetchAll()
                .then(item => { //itemはlist型
                    var object = item[0];
                    var payId = object.payId;
                    console.log(payId);
                    console.log(object);
                    console.log("届いたぞ！ノロマ！");
                    // var TestClass = ncmb.DataStore('pay');
                    // var item = TestClass.equalTo("payId", payId)
                    //     .fetchAll()
                    //     .then(item => { //itemはlist型
                    //         console.log(item.cash);
                    //         for (var i = 0; i <= item.length - 1; i++) {
                    //             var a = item[0];
                    //             console.log("世界一になるのは俺だ！");
                    //             if(a.cash){
                    //                 document.getElementById('cash_area').innerHTML = "有";
                    //             }else{
                    //                 document.getElementById('cash_area').innerHTML = "無";
                    //             }
                    //             if(a.CokeONPay){
                    //                 document.getElementById('CokeONPay_area').innerHTML = "有";
                    //             }else{
                    //                 document.getElementById('CokeONPay_area').innerHTML = "無";
                    //             }
                    //             if(a.dPay){
                    //                 document.getElementById('dPay_area').innerHTML = "有";
                    //             }else{
                    //                 document.getElementById('dPay_area').innerHTML = "無";
                    //             }
                    //         }
                    //         // console.log(object.CokeONPay);
                    //         // console.log(object.dPay);
                    //         document.getElementById('edit_area').innerHTML = a.cash;
                    //     })
                    //     .catch(e => {
                    //         console.log('俺はサッカーをあきらめる理由を探しにブルーロックに来た');
                    //     });
                    var food = "";
                    var drink = "";
                    const image = document.createElement('img');
                    image.src = 'img/have.png'; // 画像パス
                    if (object.foodFlg) {
                        food = '<img src="img/have.png">';
                    } else {
                        food = '';
                        console.log(food);
                    }
                    if (object.drinkFlg) {
                        drink = '<img src="img/have.png">';
                    } else {
                        drink = '';
                    }

                    document.getElementById('cashArea' + num).innerHTML = object.payData;
                    document.getElementById('foodFlgArea' + num).innerHTML = food;
                    document.getElementById('drinkFlgArea' + num).innerHTML = drink;

                })
                .catch(e => {
                    console.log('データなし');
                });
        }
    </script>
</head>


<body>
    <header>
        <img id="wave1" src="img/sky.png" width=100%>
        <div class="wave1">
            <canvas id="waveCanvas1" style="z-index:1"></canvas>
            <script src="js/wave.js"></script>
        </div>
    </header>
    <!------ filter ------>
    <main>
        <!------ 絞り込み部分 ------>
        <!-- <select class="js-filter" name="area">
            <option value="all">全て</option>
            <option value="本館">本館</option>
            <option value="2号館">2号館</option>
            <option value="3号館">3号館</option>
        </select>
        <select class="js-filter" name="floor">
            <option value="all">全て</option>
            <option value="1F">1F</option>
            <option value="2F">2F</option>
            <option value="3F">3F</option>
            <option value="4F">4F</option>
            <option value="5F">5F</option>
            <option value="6F">6F</option>
            <option value="7F">7F</option>
            <option value="8F">8F</option>
        </select> -->

        <!------ 絞り込み対象 ------>
        <ul class="accordion-area">
            <div class="info">
                <h2>決済可能：●　決済不可能：〇</h2>
            </div>

            <h2>本館1F</h2>
            <li>
                <section>
                    <h3 class="title">101<br> ドリンク：
                        <div class="ico" id="drinkFlgArea101"></div>
                        <br>フード：
                        <div class="ico" id="foodFlgArea101"></div>
                    </h3>
                    <div class="box">
                        <div class="flg">

                        </div>
                        <script>
                            waa("101");
                        </script>
                        <p>
                            <div id="cashArea101"></div>
                        </p>
                    </div>
                </section>
            </li>
            <li>
                <section>
                    <h3 class="title">102<br> ドリンク：
                        <div class="ico" id="drinkFlgArea102"></div>
                        <br>フード：
                        <div class="ico" id="foodFlgArea102"></div>
                    </h3>
                    <div class="box">
                        <script>
                            waa("102");
                        </script>
                        <p>
                            <div id="cashArea102"></div>
                        </p>
                    </div>
                </section>
            </li>
        </ul>
        <ul class="accordion-area">
            <h2>本館2F</h2>
            <h3>現在自動販売機は設置されていません</h3>
        </ul>
        <ul class="accordion-area">
            <h2>本館3F</h2>
            <h3>現在自動販売機は設置されていません</h3>
        </ul>
        <ul class="accordion-area">
            <h2>本館4F</h2>
            <li>
                <section>
                    <h3 class="title">401<br> ドリンク：
                        <div class="ico" id="drinkFlgArea1401"></div>
                        <br>フード：
                        <div class="ico" id="foodFlgArea401"></div>
                    </h3>
                    <div class="box">
                        <script>
                            waa("401");
                        </script>
                        <p>
                            <div id="cashArea401"></div>
                        </p>
                    </div>
                </section>
            </li>
            <li>
                <section>
                    <h3 class="title">402<br> ドリンク：
                        <div class="ico" id="drinkFlgArea402"></div>
                        <br>フード：
                        <div class="ico" id="foodFlgArea402"></div>
                    </h3>
                    <div class="box">
                        <script>
                            waa("402");
                        </script>
                        <p>
                            <div id="cashArea402"></div>
                        </p>
                    </div>
                </section>
            </li>
            <li>
                <section>
                    <h3 class="title">403<br> ドリンク：
                        <div class="ico" id="drinkFlgArea403"></div>
                        <br>フード：
                        <div class="ico" id="foodFlgArea403"></div>
                    </h3>
                    <div class="box">
                        <script>
                            waa("403");
                        </script>
                        <p>
                            <div id="cashArea403"></div>
                        </p>
                    </div>
                </section>
            </li>
        </ul>
        <ul class="accordion-area">
            <h2>本館5F</h2>
            <h3>現在自動販売機は設置されていません</h3>
        </ul>
        <ul class="accordion-area">
            <h2>本館6F</h2>
            <li>
                <section>
                    <h3 class="title">601<br> ドリンク：
                        <div class="ico" id="drinkFlgArea601"></div>
                        <br>フード：
                        <div class="ico" id="foodFlgArea601"></div>
                    </h3>
                    <div class="box">
                        <script>
                            waa("601");
                        </script>
                        <p>
                            <div id="cashArea601"></div>
                        </p>
                    </div>
                </section>
            </li>
            <li>
                <section>
                    <h3 class="title">602<br> ドリンク：
                        <div class="ico" id="drinkFlgArea602"></div>
                        <br>フード：
                        <div class="ico" id="foodFlgArea602"></div>
                    </h3>
                    <div class="box">
                        <script>
                            waa("602");
                        </script>
                        <p>
                            <div id="cashArea602"></div>
                        </p>
                    </div>
                </section>
            </li>
        </ul>
        <ul class="accordion-area">
            <h2>本館8F</h2>
            <li>
                <section>
                    <h3 class="title">801<br> ドリンク：
                        <div class="ico" id="drinkFlgArea801"></div>
                        <br>フード：
                        <div class="ico" id="foodFlgArea801"></div>
                    </h3>
                    <div class="box">
                        <script>
                            waa("801");
                        </script>
                        <p>
                            <div id="cashArea801"></div>
                        </p>
                    </div>
                </section>
            </li>
        </ul>
        <ul class="accordion-area">
            <h2>2号館</h2>
            <h3>現在自動販売機は設置されていません</h3>
        </ul>
        <ul class="accordion-area">
            <h2>3号館1F</h2>
            <li>
                <section>
                    <h3 class="title">311<br> ドリンク：
                        <div class="ico" id="drinkFlgArea311"></div>
                        <br>フード：
                        <div class="ico" id="foodFlgArea311"></div>
                    </h3>
                    <div class="box">
                        <script>
                            waa("311");
                        </script>
                        <p>
                            <div id="cashArea311"></div>
                        </p>
                    </div>
                </section>
            </li>
            <li>
                <section>
                    <h3 class="title">312<br> ドリンク：
                        <div class="ico" id="drinkFlgArea312"></div>
                        <br>フード：
                        <div class="ico" id="foodFlgArea312"></div>
                    </h3>
                    <div class="box">
                        <script>
                            waa("312");
                        </script>
                        <p>
                            <div id="cashArea312"></div>
                        </p>
                    </div>
                </section>
            </li>
        </ul>
        <ul class="accordion-area">
            <h2>3号館2F</h2>
            <li>
                <section>
                    <h3 class="title">321<br> ドリンク：
                        <div class="ico" id="drinkFlgArea321"></div>
                        <br>フード：
                        <div class="ico" id="foodFlgArea321"></div>
                    </h3>
                    <div class="box">
                        <script>
                            waa("321");
                        </script>
                        <p>
                            <div id="cashArea321"></div>
                        </p>
                    </div>
                </section>
            </li>
            <li>
                <section>
                    <h3 class="title">322<br> ドリンク：
                        <div class="ico" id="drinkFlgArea322"></div>
                        <br>フード：
                        <div class="ico" id="foodFlgArea322"></div>
                    </h3>
                    <div class="box">
                        <script>
                            waa("322");
                        </script>
                        <p>
                            <div id="cashArea322"></div>
                        </p>
                    </div>
                </section>
            </li>
        </ul>
        <!-- <script>
            multi_filter('d-none', '.js-filter-item', '.js-filter', '.js-filter-msg');
        </script> -->
        <br>
    </main>
    <footer>
        <img id="wave2" src="img/sky.png" width=100%>
        <div class="wave2">
            <canvas id="waveCanvas2"></canvas>
            <script src="js/wave.js"></script>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="js/vendingDown.js"></script>
</body>

</html>